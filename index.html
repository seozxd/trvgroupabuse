<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Loading - Please wait...</title>
  <meta name="description" content="Loading the latest spam hunter data...">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://trvgroupabuse.pages.dev/">

  <!-- Dynamic SEO Updater -->
<script>
  async function applyDynamicSEO() {
    // 1. Ziyaret√ßinin o anki domain'ini al
    const currentDomain = window.location.hostname;
    // 2. 'www.' √∂nekini temizle (KV'ye www'siz kaydettiƒüimiz i√ßin)
    const cleanDomain = currentDomain.replace('www.', '');

    try {
      // 3. /domain-config.txt yerine YENƒ∞ API'mizi √ßaƒüƒ±r
      const response = await fetch(`/config?domain=${cleanDomain}`);

      // 4. API'den bir hata d√∂nerse (√∂rn: domain bulunamadƒ±)
      if (!response.ok) {
        console.error("Konfig√ºrasyon alƒ±namadƒ±:", response.statusText);
        // ƒ∞steƒüe baƒülƒ±: Hata durumunda varsayƒ±lan ba≈ülƒ±k
        document.title = "Sayfa Bulunamadƒ±";
        return;
      }

      // 5. API'den gelen veriyi metin olarak al
      // (√∂rn: "Best 1 Sƒ∞te|Download links Source 1|red")
      const configData = await response.text();

      // 6. Gelen veriyi '|' ayra√ßƒ±ndan b√∂lerek par√ßala
      const parts = configData.split("|").map(part => part.trim());
      const title = parts[0];
      const description = parts[1];
      const theme = parts[2];

      // 7. Veri gelmi≈üse sayfayƒ± g√ºncelle
      if (title) {
        // <title> etiketini g√ºncelle
        document.title = title;

        // <meta name="description"> etiketini g√ºncelle (yoksa yarat)
        let metaDesc = document.querySelector('meta[name="description"]');
        if (!metaDesc) {
          metaDesc = document.createElement("meta");
          metaDesc.setAttribute("name", "description");
          document.head.appendChild(metaDesc);
        }
        metaDesc.setAttribute("content", description);

        // <link rel="canonical"> etiketini g√ºncelle (yoksa yarat)
        let canonical = document.querySelector('link[rel="canonical"]');
        if (!canonical) {
          canonical = document.createElement("link");
          canonical.setAttribute("rel", "canonical");
          document.head.appendChild(canonical);
        }
        // Canonical link i√ßin o anki domain'i kullan
        canonical.setAttribute("href", `https://${currentDomain}/`); 

        // G√∂r√ºn√ºr i√ßeriƒüi g√ºncelle
        // (Bu ID'lerin HTML'de olduƒüundan emin olun)
        const mainTitleEl = document.getElementById("mainTitle");
        const mainDescEl = document.getElementById("mainDescription");
        
        if(mainTitleEl) mainTitleEl.textContent = title;
        if(mainDescEl) mainDescEl.textContent = description;

        // <body> etiketine tema (renk) sƒ±nƒ±fƒ±nƒ± uygula
        if (theme) {
          document.body.classList.add(`theme-${theme}`);
        }
      }

    } catch (e) {
      console.error("SEO dinamik y√ºklenirken hata olu≈ütu:", e);
    }
  }

  // Sayfa y√ºklendiƒüinde fonksiyonu √ßalƒ±≈ütƒ±r
  document.addEventListener("DOMContentLoaded", applyDynamicSEO);
</script>

  <!-- CSS + Inline Loading Spinner -->
  <style>
    :root {
      --primary-color: #e74c3c;
      --secondary-color: #3498db;
      --background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    }

    .theme-red { --primary-color: #e74c3c; --background: linear-gradient(135deg, #ff6b6b, #ee5a24); }
    .theme-blue { --primary-color: #3498db; --background: linear-gradient(135deg, #74b9ff, #0984e3); }
    .theme-green { --primary-color: #27ae60; --background: linear-gradient(135deg, #00b894, #00a085); }
    .theme-purple { --primary-color: #9b59b6; --background: linear-gradient(135deg, #a29bfe, #6c5ce7); }
    .theme-orange { --primary-color: #e67e22; --background: linear-gradient(135deg, #fdcb6e, #e17055); }
    .theme-dark { --primary-color: #2c3e50; --background: linear-gradient(135deg, #2c3e50, #34495e); }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      line-height: 1.6;
      color: #333;
      background: var(--background);
      min-height: 100vh;
      transition: all 0.3s ease;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }

    .header {
      text-align: center;
      background: rgba(255, 255, 255, 0.95);
      padding: 40px 20px;
      border-radius: 15px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
      margin-bottom: 30px;
      backdrop-filter: blur(10px);
    }

    .header h1 {
      color: var(--primary-color);
      font-size: 2.5em;
      margin-bottom: 10px;
    }

    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 15px;
      margin-bottom: 30px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.95);
      padding: 20px;
      border-radius: 10px;
      text-align: center;
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .spam-list {
      background: rgba(255, 255, 255, 0.95);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.1);
    }

    .downloadlink-item {
      padding: 20px;
      border-bottom: 1px solid #eee;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .downloadlink-item:last-child {
      border-bottom: none;
    }

    .new-domains {
      font-weight: bold;
      color: var(--primary-color);
      font-size: 1.1em;
    }

    .download-link {
      background: var(--primary-color);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      text-decoration: none;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    .download-link:hover {
      background: var(--secondary-color);
      transform: translateY(-2px);
    }

    .last-update {
      text-align: center;
      color: white;
      margin-top: 30px;
      opacity: 0.8;
    }

    /* Loading Spinner */
    #externalLoadingScreen {
      position: fixed;
      top: 0; left: 0;
      width: 100vw; height: 100vh;
      background: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      z-index: 99999; color: white;
      font-family: Arial;
    }

    #externalLoadingScreen .spinner {
      width: 40px; height: 40px;
      border: 3px solid rgba(255,255,255,0.3);
      border-top: 3px solid white;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin-bottom: 15px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    body.loaded #externalLoadingScreen {
      opacity: 0;
      visibility: hidden;
      transition: all 0.5s ease;
    }
  </style>

  <!-- External Spinner Activation -->
  <script>
    !function(){
      const e = document.createElement("div");
      e.innerHTML = '<div id="externalLoadingScreen"><div class="spinner"></div><div>Loading...</div></div>';
      document.body.prepend(e.firstChild);
      document.body.style.visibility = "hidden";
      window.addEventListener("load", function(){
        document.body.style.visibility = "visible";
        setTimeout(() => document.body.classList.add("loaded"), 100);
      });
    }();
  </script>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1 id="mainTitle">üö® Loading...</h1>
      <p id="mainDescription">Loading spam domain intelligence...</p>
    </div>

    <div class="stats">
      <div class="stat-card"><h3>üìä Total Domains</h3><p id="totalDomains">0</p></div>
      <div class="stat-card"><h3>üïí Last Update</h3><p id="lastUpdate">-</p></div>
      <div class="stat-card"><h3>üîç Active Scanning</h3><p>‚úÖ Active</p></div>
    </div>

    <div class="spam-list">
      <div id="spamContainer">
        <!-- Domains will be loaded here dynamically -->
      </div>
    </div>

    <div class="last-update">
      <p>Last update: <span id="updateTime"></span></p>
    </div>
  </div>

  <!-- Load Spam Domains -->
  <script>
    async function loadSpamDomains() {
      try {
        const response = await fetch('/domains.txt');
        const text = await response.text();
        const domains = text.split('\n').map(d => d.trim()).filter(Boolean);
        displayDomains(domains);
        updateStats(domains);
      } catch (error) {
        console.error('Domains loading error:', error);
      }
    }

    function displayDomains(domains) {
      const container = document.getElementById('spamContainer');
      container.innerHTML = '';
      domains.forEach(domain => {
        const el = document.createElement('div');
        el.className = 'downloadlink-item';
        el.innerHTML = `
          <div style="flex: 1;">
            <span class="new-domains">${domain}</span>
          </div>
          <div>
            <a href="https://${domain}" class="download-link" target="_blank">üîó Download Content</a>
          </div>
        `;
        container.appendChild(el);
      });
    }

    function updateStats(domains) {
      document.getElementById('totalDomains').textContent = domains.length;
      const now = new Date();
      document.getElementById('lastUpdate').textContent = now.toLocaleDateString('en-US');
      document.getElementById('updateTime').textContent = now.toLocaleString('en-US');
    }

    document.addEventListener('DOMContentLoaded', loadSpamDomains);
  </script>
</body>
</html>
